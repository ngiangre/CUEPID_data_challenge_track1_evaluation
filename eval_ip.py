{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Evaluation code for competition"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Load libraries"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import os\n",
    "import numpy as np\n",
    "import pandas as pd\n",
    "from sklearn.metrics import mean_squared_error"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Set variables"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "types = ['confirmed','deaths','recovered']\n",
    "\n",
    "data_dir='Track1_Submitted/'"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Load in data files"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Submitter (predicted)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "ename": "SyntaxError",
     "evalue": "invalid syntax (<ipython-input-1-818b8b6287ef>, line 8)",
     "output_type": "error",
     "traceback": [
      "\u001b[1;36m  File \u001b[1;32m\"<ipython-input-1-818b8b6287ef>\"\u001b[1;36m, line \u001b[1;32m8\u001b[0m\n\u001b[1;33m    file_dict{p_target} = [x for x in files if p_target in x]\u001b[0m\n\u001b[1;37m             ^\u001b[0m\n\u001b[1;31mSyntaxError\u001b[0m\u001b[1;31m:\u001b[0m invalid syntax\n"
     ]
    }
   ],
   "source": [
    "def get_submitter_dict(data_dir, pred_targets):\n",
    "    unis = [x for x in os.listdir(data_dir) if '.DS' not in x]\n",
    "    submitter_dict = {}\n",
    "    for uni in unis:\n",
    "        uni_dict = {}\n",
    "        files = [x for x in os.listdir(data_dir+uni) if '.DS' not in x]\n",
    "        file_dict = {}\n",
    "        for type_ in types:\n",
    "            f_list = [x for x in files if type_ in x]\n",
    "            file_dict[type_] = f_list\n",
    "            if len(f_list)>0:\n",
    "                uni_dict[type_] = pd.read_csv(data_dir+uni+'/'+f_list[0])\n",
    "        submitter_dict[uni] = uni_dict\n",
    "    return submitter_dict"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### JHU (true)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "ename": "SyntaxError",
     "evalue": "invalid syntax (<ipython-input-2-c09054abb65e>, line 5)",
     "output_type": "error",
     "traceback": [
      "\u001b[1;36m  File \u001b[1;32m\"<ipython-input-2-c09054abb65e>\"\u001b[1;36m, line \u001b[1;32m5\u001b[0m\n\u001b[1;33m    def get_jhu_dict(true_dte, filt_dte, prefix, pred_targets, suffix)\u001b[0m\n\u001b[1;37m                                                                      ^\u001b[0m\n\u001b[1;31mSyntaxError\u001b[0m\u001b[1;31m:\u001b[0m invalid syntax\n"
     ]
    }
   ],
   "source": [
    "true_dte='5/1/20'\n",
    "filt_dte='4/23/20'\n",
    "prefix = 'data/time_series_covid19_'\n",
    "suffix = '_global.csv'\n",
    "def get_jhu_target(true_dte, filt_dte, fname):\n",
    "    target_df = \\\n",
    "        (pd.\n",
    "         read_csv(fname).\n",
    "         rename(columns = {true_dte : 'true'}).\n",
    "         rename(columns = {filt_dte : 'filt'}).\n",
    "         loc[:,['Province/State','Country/Region','true', 'filt']].\n",
    "         #only view countries/states with filt counts>100\n",
    "         query('filt>100')\n",
    "        )\n",
    "    display(target_df.shape)\n",
    "def get_jhu_dict(true_dte, filt_dte, prefix, types, suffix):\n",
    "    jhu_dict = {}\n",
    "    for type_ in types\n",
    "        jhu_dict[p_target] =  get_jhu_target(true_dte, filt_dte,  prefix+p_target+suffix)\n",
    "    return jhu_dict    \n",
    "        \n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Comparing data files"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "manasi.sharma\n",
      "confirmed\n",
      "(264, 3)\n",
      "(191, 1)\n",
      "(191, 2)\n",
      "recovered\n",
      "(250, 3)\n",
      "(154, 1)\n",
      "(154, 2)\n",
      "deaths\n",
      "(264, 3)\n",
      "(55, 1)\n",
      "(55, 2)\n",
      "dlm2202\n",
      "confirmed\n",
      "(264, 96)\n",
      "(191, 1)\n",
      "(191, 2)\n",
      "recovered\n",
      "(250, 96)\n",
      "(154, 1)\n",
      "(154, 2)\n",
      "deaths\n",
      "(264, 96)\n",
      "(55, 1)\n",
      "(55, 2)\n",
      "mcg2208\n",
      "confirmed\n",
      "(264, 3)\n",
      "(191, 1)\n",
      "(191, 2)\n",
      "recovered\n",
      "(250, 3)\n",
      "(154, 1)\n",
      "(154, 2)\n",
      "deaths\n",
      "(264, 3)\n",
      "(55, 1)\n",
      "(55, 2)\n",
      "a.saakyan\n",
      "confirmed\n",
      "(264, 1)\n",
      "(191, 1)\n",
      "(191, 2)\n",
      "recovered\n",
      "(250, 1)\n",
      "(154, 1)\n",
      "(154, 2)\n",
      "deaths\n",
      "(264, 1)\n",
      "(55, 1)\n",
      "(55, 2)\n",
      "by2287\n",
      "confirmed\n",
      "(264, 3)\n",
      "(191, 1)\n",
      "(191, 2)\n",
      "recovered\n",
      "(250, 3)\n",
      "(154, 1)\n",
      "(154, 2)\n",
      "deaths\n",
      "(264, 3)\n",
      "(55, 1)\n",
      "(55, 2)\n"
     ]
    }
   ],
   "source": [
    "pred_dte = '5/1/20'\n",
    "results_dict = {}\n",
    "compare_dfs = {}\n",
    "\n",
    "\n",
    "            \n",
    "def get_compare_df(df_s, df_j):            \n",
    "    print(df_s.shape)\n",
    "    print(df_j.shape)\n",
    "    compare_df = \\\n",
    "        (df_j[['true']].\n",
    "        join(df_s[[pred_dte]].\n",
    "        rename(columns = {pred_dte : 'pred'}).\n",
    "        assign(pred = lambda x: x.pred.where(x.pred.ge(0))),\n",
    "        how='left')\n",
    "        )\n",
    "    print(compare_df.shape)\n",
    "    return compare_df\n",
    "\n",
    "def get_rmse(y_true, y_pred):\n",
    "    return mean_squared_error(y_true,y_pred) ** 0.5\n",
    "\n",
    "def get_log(col, compare_df):\n",
    "    return compare_df[col].\n",
    "                      replace([-0,0],1).\n",
    "                      replace([np.inf, -np.inf], np.nan).\n",
    "                      replace([np.nan, -np.nan],1).\n",
    "                      apply(np.log).\n",
    "                      values\n",
    "\n",
    "def get_results_df(submitter, jhu_dict ):\n",
    "    for uni in submitter_dict.keys():\n",
    "        if uni=='sl4646' break;\n",
    "        print(uni)\n",
    "        uni_dict = {}\n",
    "        compare_dfs[uni] = {}\n",
    "        for type_ in jhu_dict.keys():\n",
    "            print(type_)\n",
    "            compare_df = get_compare_df((submitter_dict[uni][type_].set_index(['Province/State','Country/Region'])),\n",
    "                    jhu_dict[type_].set_index(['Province/State','Country/Region'])                 )\n",
    "            compare_dfs[uni][type_] = compare_df\n",
    "            uni_dict[type_] = get_rmse(get_log('pred',compare_df), get_log('true',compare_df['true']))\n",
    "        results_dict[uni] = uni_dict\n",
    "    return [ pd.DataFrame(results_dict).T, compare_dfs ]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Display RMSE ranking"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>confirmed</th>\n",
       "      <th>deaths</th>\n",
       "      <th>recovered</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>dlm2202</th>\n",
       "      <td>0.192450</td>\n",
       "      <td>0.132547</td>\n",
       "      <td>0.274031</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mcg2208</th>\n",
       "      <td>0.214032</td>\n",
       "      <td>0.159250</td>\n",
       "      <td>0.400228</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>manasi.sharma</th>\n",
       "      <td>0.280215</td>\n",
       "      <td>0.158248</td>\n",
       "      <td>3.220875</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>by2287</th>\n",
       "      <td>0.710479</td>\n",
       "      <td>0.545783</td>\n",
       "      <td>1.475169</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>a.saakyan</th>\n",
       "      <td>0.850618</td>\n",
       "      <td>0.932349</td>\n",
       "      <td>1.384644</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "               confirmed    deaths  recovered\n",
       "dlm2202         0.192450  0.132547   0.274031\n",
       "mcg2208         0.214032  0.159250   0.400228\n",
       "manasi.sharma   0.280215  0.158248   3.220875\n",
       "by2287          0.710479  0.545783   1.475169\n",
       "a.saakyan       0.850618  0.932349   1.384644"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "display(results_df.sort_values(confirmed))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>confirmed</th>\n",
       "      <th>deaths</th>\n",
       "      <th>recovered</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>dlm2202</th>\n",
       "      <td>0.192450</td>\n",
       "      <td>0.132547</td>\n",
       "      <td>0.274031</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>manasi.sharma</th>\n",
       "      <td>0.280215</td>\n",
       "      <td>0.158248</td>\n",
       "      <td>3.220875</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mcg2208</th>\n",
       "      <td>0.214032</td>\n",
       "      <td>0.159250</td>\n",
       "      <td>0.400228</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>by2287</th>\n",
       "      <td>0.710479</td>\n",
       "      <td>0.545783</td>\n",
       "      <td>1.475169</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>a.saakyan</th>\n",
       "      <td>0.850618</td>\n",
       "      <td>0.932349</td>\n",
       "      <td>1.384644</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "               confirmed    deaths  recovered\n",
       "dlm2202         0.192450  0.132547   0.274031\n",
       "manasi.sharma   0.280215  0.158248   3.220875\n",
       "mcg2208         0.214032  0.159250   0.400228\n",
       "by2287          0.710479  0.545783   1.475169\n",
       "a.saakyan       0.850618  0.932349   1.384644"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "display(results_df.sort_values(deaths))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>confirmed</th>\n",
       "      <th>deaths</th>\n",
       "      <th>recovered</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>dlm2202</th>\n",
       "      <td>0.192450</td>\n",
       "      <td>0.132547</td>\n",
       "      <td>0.274031</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>manasi.sharma</th>\n",
       "      <td>0.280215</td>\n",
       "      <td>0.158248</td>\n",
       "      <td>3.220875</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mcg2208</th>\n",
       "      <td>0.214032</td>\n",
       "      <td>0.159250</td>\n",
       "      <td>0.400228</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>by2287</th>\n",
       "      <td>0.710479</td>\n",
       "      <td>0.545783</td>\n",
       "      <td>1.475169</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>a.saakyan</th>\n",
       "      <td>0.850618</td>\n",
       "      <td>0.932349</td>\n",
       "      <td>1.384644</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "               confirmed    deaths  recovered\n",
       "dlm2202         0.192450  0.132547   0.274031\n",
       "manasi.sharma   0.280215  0.158248   3.220875\n",
       "mcg2208         0.214032  0.159250   0.400228\n",
       "by2287          0.710479  0.545783   1.475169\n",
       "a.saakyan       0.850618  0.932349   1.384644"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "display(results_df.sort_values(deaths))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th>true</th>\n",
       "      <th>pred</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Province/State</th>\n",
       "      <th>Country/Region</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"6\" valign=\"top\">NaN</th>\n",
       "      <th>Afghanistan</th>\n",
       "      <td>2335</td>\n",
       "      <td>1891</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Albania</th>\n",
       "      <td>782</td>\n",
       "      <td>824</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Algeria</th>\n",
       "      <td>4154</td>\n",
       "      <td>3830</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Andorra</th>\n",
       "      <td>745</td>\n",
       "      <td>781</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Argentina</th>\n",
       "      <td>4532</td>\n",
       "      <td>4535</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Armenia</th>\n",
       "      <td>2148</td>\n",
       "      <td>1944</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Australian Capital Territory</th>\n",
       "      <th>Australia</th>\n",
       "      <td>106</td>\n",
       "      <td>108</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>New South Wales</th>\n",
       "      <th>Australia</th>\n",
       "      <td>3030</td>\n",
       "      <td>3059</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Queensland</th>\n",
       "      <th>Australia</th>\n",
       "      <td>1034</td>\n",
       "      <td>1059</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>South Australia</th>\n",
       "      <th>Australia</th>\n",
       "      <td>438</td>\n",
       "      <td>452</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Tasmania</th>\n",
       "      <th>Australia</th>\n",
       "      <td>221</td>\n",
       "      <td>240</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Victoria</th>\n",
       "      <th>Australia</th>\n",
       "      <td>1371</td>\n",
       "      <td>1362</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Western Australia</th>\n",
       "      <th>Australia</th>\n",
       "      <td>551</td>\n",
       "      <td>559</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"15\" valign=\"top\">NaN</th>\n",
       "      <th>Austria</th>\n",
       "      <td>15531</td>\n",
       "      <td>15862</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Azerbaijan</th>\n",
       "      <td>1854</td>\n",
       "      <td>1776</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Bahrain</th>\n",
       "      <td>3170</td>\n",
       "      <td>3007</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Bangladesh</th>\n",
       "      <td>8238</td>\n",
       "      <td>7635</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Belarus</th>\n",
       "      <td>14917</td>\n",
       "      <td>13205</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Belgium</th>\n",
       "      <td>49032</td>\n",
       "      <td>48655</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Bolivia</th>\n",
       "      <td>1229</td>\n",
       "      <td>1047</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Bosnia and Herzegovina</th>\n",
       "      <td>1781</td>\n",
       "      <td>1608</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Brazil</th>\n",
       "      <td>92202</td>\n",
       "      <td>75646</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Brunei</th>\n",
       "      <td>138</td>\n",
       "      <td>156</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Bulgaria</th>\n",
       "      <td>1555</td>\n",
       "      <td>1431</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Burkina Faso</th>\n",
       "      <td>649</td>\n",
       "      <td>710</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Cabo Verde</th>\n",
       "      <td>122</td>\n",
       "      <td>120</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Cambodia</th>\n",
       "      <td>122</td>\n",
       "      <td>130</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Cameroon</th>\n",
       "      <td>1832</td>\n",
       "      <td>1827</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Alberta</th>\n",
       "      <th>Canada</th>\n",
       "      <td>5573</td>\n",
       "      <td>5548</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>British Columbia</th>\n",
       "      <th>Canada</th>\n",
       "      <td>2145</td>\n",
       "      <td>2241</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"13\" valign=\"top\">NaN</th>\n",
       "      <th>Sri Lanka</th>\n",
       "      <td>690</td>\n",
       "      <td>530</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Sudan</th>\n",
       "      <td>533</td>\n",
       "      <td>412</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Sweden</th>\n",
       "      <td>21520</td>\n",
       "      <td>21119</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Switzerland</th>\n",
       "      <td>29705</td>\n",
       "      <td>29950</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Taiwan*</th>\n",
       "      <td>429</td>\n",
       "      <td>443</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Tanzania</th>\n",
       "      <td>480</td>\n",
       "      <td>470</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Thailand</th>\n",
       "      <td>2960</td>\n",
       "      <td>3138</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Togo</th>\n",
       "      <td>123</td>\n",
       "      <td>99</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Trinidad and Tobago</th>\n",
       "      <td>116</td>\n",
       "      <td>121</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Tunisia</th>\n",
       "      <td>998</td>\n",
       "      <td>1020</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Turkey</th>\n",
       "      <td>122392</td>\n",
       "      <td>130974</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Ukraine</th>\n",
       "      <td>10861</td>\n",
       "      <td>11024</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>United Arab Emirates</th>\n",
       "      <td>13038</td>\n",
       "      <td>12604</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Bermuda</th>\n",
       "      <th>United Kingdom</th>\n",
       "      <td>114</td>\n",
       "      <td>123</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Channel Islands</th>\n",
       "      <th>United Kingdom</th>\n",
       "      <td>538</td>\n",
       "      <td>587</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Gibraltar</th>\n",
       "      <th>United Kingdom</th>\n",
       "      <td>144</td>\n",
       "      <td>138</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Isle of Man</th>\n",
       "      <th>United Kingdom</th>\n",
       "      <td>316</td>\n",
       "      <td>365</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"13\" valign=\"top\">NaN</th>\n",
       "      <th>United Kingdom</th>\n",
       "      <td>177454</td>\n",
       "      <td>168068</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Uruguay</th>\n",
       "      <td>648</td>\n",
       "      <td>632</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>US</th>\n",
       "      <td>1103461</td>\n",
       "      <td>1028140</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Uzbekistan</th>\n",
       "      <td>2086</td>\n",
       "      <td>2205</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Venezuela</th>\n",
       "      <td>335</td>\n",
       "      <td>430</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Vietnam</th>\n",
       "      <td>270</td>\n",
       "      <td>283</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Zambia</th>\n",
       "      <td>109</td>\n",
       "      <td>101</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>West Bank and Gaza</th>\n",
       "      <td>353</td>\n",
       "      <td>586</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Guinea-Bissau</th>\n",
       "      <td>257</td>\n",
       "      <td>58</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mali</th>\n",
       "      <td>508</td>\n",
       "      <td>488</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Kosovo</th>\n",
       "      <td>806</td>\n",
       "      <td>588</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Burma</th>\n",
       "      <td>151</td>\n",
       "      <td>210</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Sierra Leone</th>\n",
       "      <td>136</td>\n",
       "      <td>115</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>191 rows × 2 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                                                        true     pred\n",
       "Province/State               Country/Region                          \n",
       "NaN                          Afghanistan                2335     1891\n",
       "                             Albania                     782      824\n",
       "                             Algeria                    4154     3830\n",
       "                             Andorra                     745      781\n",
       "                             Argentina                  4532     4535\n",
       "                             Armenia                    2148     1944\n",
       "Australian Capital Territory Australia                   106      108\n",
       "New South Wales              Australia                  3030     3059\n",
       "Queensland                   Australia                  1034     1059\n",
       "South Australia              Australia                   438      452\n",
       "Tasmania                     Australia                   221      240\n",
       "Victoria                     Australia                  1371     1362\n",
       "Western Australia            Australia                   551      559\n",
       "NaN                          Austria                   15531    15862\n",
       "                             Azerbaijan                 1854     1776\n",
       "                             Bahrain                    3170     3007\n",
       "                             Bangladesh                 8238     7635\n",
       "                             Belarus                   14917    13205\n",
       "                             Belgium                   49032    48655\n",
       "                             Bolivia                    1229     1047\n",
       "                             Bosnia and Herzegovina     1781     1608\n",
       "                             Brazil                    92202    75646\n",
       "                             Brunei                      138      156\n",
       "                             Bulgaria                   1555     1431\n",
       "                             Burkina Faso                649      710\n",
       "                             Cabo Verde                  122      120\n",
       "                             Cambodia                    122      130\n",
       "                             Cameroon                   1832     1827\n",
       "Alberta                      Canada                     5573     5548\n",
       "British Columbia             Canada                     2145     2241\n",
       "...                                                      ...      ...\n",
       "NaN                          Sri Lanka                   690      530\n",
       "                             Sudan                       533      412\n",
       "                             Sweden                    21520    21119\n",
       "                             Switzerland               29705    29950\n",
       "                             Taiwan*                     429      443\n",
       "                             Tanzania                    480      470\n",
       "                             Thailand                   2960     3138\n",
       "                             Togo                        123       99\n",
       "                             Trinidad and Tobago         116      121\n",
       "                             Tunisia                     998     1020\n",
       "                             Turkey                   122392   130974\n",
       "                             Ukraine                   10861    11024\n",
       "                             United Arab Emirates      13038    12604\n",
       "Bermuda                      United Kingdom              114      123\n",
       "Channel Islands              United Kingdom              538      587\n",
       "Gibraltar                    United Kingdom              144      138\n",
       "Isle of Man                  United Kingdom              316      365\n",
       "NaN                          United Kingdom           177454   168068\n",
       "                             Uruguay                     648      632\n",
       "                             US                      1103461  1028140\n",
       "                             Uzbekistan                 2086     2205\n",
       "                             Venezuela                   335      430\n",
       "                             Vietnam                     270      283\n",
       "                             Zambia                      109      101\n",
       "                             West Bank and Gaza          353      586\n",
       "                             Guinea-Bissau               257       58\n",
       "                             Mali                        508      488\n",
       "                             Kosovo                      806      588\n",
       "                             Burma                       151      210\n",
       "                             Sierra Leone                136      115\n",
       "\n",
       "[191 rows x 2 columns]"
      ]
     },
     "execution_count": 25,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "compare_dfs['dlm2202'][confirmed]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th>true</th>\n",
       "      <th>pred</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Province/State</th>\n",
       "      <th>Country/Region</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"6\" valign=\"top\">NaN</th>\n",
       "      <th>Algeria</th>\n",
       "      <td>453</td>\n",
       "      <td>450</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Argentina</th>\n",
       "      <td>225</td>\n",
       "      <td>237</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Austria</th>\n",
       "      <td>589</td>\n",
       "      <td>648</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Bangladesh</th>\n",
       "      <td>170</td>\n",
       "      <td>223</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Belgium</th>\n",
       "      <td>7703</td>\n",
       "      <td>8144</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Brazil</th>\n",
       "      <td>6412</td>\n",
       "      <td>5422</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>British Columbia</th>\n",
       "      <th>Canada</th>\n",
       "      <td>112</td>\n",
       "      <td>117</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Ontario</th>\n",
       "      <th>Canada</th>\n",
       "      <td>1265</td>\n",
       "      <td>1345</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Quebec</th>\n",
       "      <th>Canada</th>\n",
       "      <td>2022</td>\n",
       "      <td>2090</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>NaN</th>\n",
       "      <th>Chile</th>\n",
       "      <td>234</td>\n",
       "      <td>259</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Hubei</th>\n",
       "      <th>China</th>\n",
       "      <td>4512</td>\n",
       "      <td>5049</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"44\" valign=\"top\">NaN</th>\n",
       "      <th>Colombia</th>\n",
       "      <td>314</td>\n",
       "      <td>305</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Czechia</th>\n",
       "      <td>240</td>\n",
       "      <td>266</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Denmark</th>\n",
       "      <td>460</td>\n",
       "      <td>451</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Dominican Republic</th>\n",
       "      <td>313</td>\n",
       "      <td>342</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Ecuador</th>\n",
       "      <td>1063</td>\n",
       "      <td>789</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Egypt</th>\n",
       "      <td>406</td>\n",
       "      <td>383</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Finland</th>\n",
       "      <td>218</td>\n",
       "      <td>305</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>France</th>\n",
       "      <td>24563</td>\n",
       "      <td>24687</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Germany</th>\n",
       "      <td>6736</td>\n",
       "      <td>7780</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Greece</th>\n",
       "      <td>140</td>\n",
       "      <td>152</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Hungary</th>\n",
       "      <td>323</td>\n",
       "      <td>337</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>India</th>\n",
       "      <td>1223</td>\n",
       "      <td>1197</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Indonesia</th>\n",
       "      <td>800</td>\n",
       "      <td>817</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Iran</th>\n",
       "      <td>6091</td>\n",
       "      <td>6345</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Ireland</th>\n",
       "      <td>1265</td>\n",
       "      <td>1132</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Israel</th>\n",
       "      <td>225</td>\n",
       "      <td>261</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Italy</th>\n",
       "      <td>28236</td>\n",
       "      <td>28201</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Japan</th>\n",
       "      <td>455</td>\n",
       "      <td>573</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Korea, South</th>\n",
       "      <td>250</td>\n",
       "      <td>259</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Malaysia</th>\n",
       "      <td>103</td>\n",
       "      <td>106</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mexico</th>\n",
       "      <td>1972</td>\n",
       "      <td>2065</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Moldova</th>\n",
       "      <td>122</td>\n",
       "      <td>108</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Morocco</th>\n",
       "      <td>171</td>\n",
       "      <td>220</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Netherlands</th>\n",
       "      <td>4893</td>\n",
       "      <td>5417</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Norway</th>\n",
       "      <td>210</td>\n",
       "      <td>263</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Pakistan</th>\n",
       "      <td>417</td>\n",
       "      <td>425</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Panama</th>\n",
       "      <td>192</td>\n",
       "      <td>205</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Peru</th>\n",
       "      <td>1124</td>\n",
       "      <td>991</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Philippines</th>\n",
       "      <td>579</td>\n",
       "      <td>546</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Poland</th>\n",
       "      <td>651</td>\n",
       "      <td>642</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Portugal</th>\n",
       "      <td>1007</td>\n",
       "      <td>1214</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Romania</th>\n",
       "      <td>744</td>\n",
       "      <td>771</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Russia</th>\n",
       "      <td>1169</td>\n",
       "      <td>1159</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Saudi Arabia</th>\n",
       "      <td>169</td>\n",
       "      <td>229</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Serbia</th>\n",
       "      <td>179</td>\n",
       "      <td>160</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>South Africa</th>\n",
       "      <td>116</td>\n",
       "      <td>124</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Spain</th>\n",
       "      <td>24543</td>\n",
       "      <td>26046</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Sweden</th>\n",
       "      <td>2653</td>\n",
       "      <td>2959</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Switzerland</th>\n",
       "      <td>1754</td>\n",
       "      <td>1777</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Turkey</th>\n",
       "      <td>3258</td>\n",
       "      <td>3508</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Ukraine</th>\n",
       "      <td>272</td>\n",
       "      <td>330</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>United Arab Emirates</th>\n",
       "      <td>111</td>\n",
       "      <td>83</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>United Kingdom</th>\n",
       "      <td>27510</td>\n",
       "      <td>23964</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>US</th>\n",
       "      <td>64943</td>\n",
       "      <td>66184</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                        true   pred\n",
       "Province/State   Country/Region                    \n",
       "NaN              Algeria                 453    450\n",
       "                 Argentina               225    237\n",
       "                 Austria                 589    648\n",
       "                 Bangladesh              170    223\n",
       "                 Belgium                7703   8144\n",
       "                 Brazil                 6412   5422\n",
       "British Columbia Canada                  112    117\n",
       "Ontario          Canada                 1265   1345\n",
       "Quebec           Canada                 2022   2090\n",
       "NaN              Chile                   234    259\n",
       "Hubei            China                  4512   5049\n",
       "NaN              Colombia                314    305\n",
       "                 Czechia                 240    266\n",
       "                 Denmark                 460    451\n",
       "                 Dominican Republic      313    342\n",
       "                 Ecuador                1063    789\n",
       "                 Egypt                   406    383\n",
       "                 Finland                 218    305\n",
       "                 France                24563  24687\n",
       "                 Germany                6736   7780\n",
       "                 Greece                  140    152\n",
       "                 Hungary                 323    337\n",
       "                 India                  1223   1197\n",
       "                 Indonesia               800    817\n",
       "                 Iran                   6091   6345\n",
       "                 Ireland                1265   1132\n",
       "                 Israel                  225    261\n",
       "                 Italy                 28236  28201\n",
       "                 Japan                   455    573\n",
       "                 Korea, South            250    259\n",
       "                 Malaysia                103    106\n",
       "                 Mexico                 1972   2065\n",
       "                 Moldova                 122    108\n",
       "                 Morocco                 171    220\n",
       "                 Netherlands            4893   5417\n",
       "                 Norway                  210    263\n",
       "                 Pakistan                417    425\n",
       "                 Panama                  192    205\n",
       "                 Peru                   1124    991\n",
       "                 Philippines             579    546\n",
       "                 Poland                  651    642\n",
       "                 Portugal               1007   1214\n",
       "                 Romania                 744    771\n",
       "                 Russia                 1169   1159\n",
       "                 Saudi Arabia            169    229\n",
       "                 Serbia                  179    160\n",
       "                 South Africa            116    124\n",
       "                 Spain                 24543  26046\n",
       "                 Sweden                 2653   2959\n",
       "                 Switzerland            1754   1777\n",
       "                 Turkey                 3258   3508\n",
       "                 Ukraine                 272    330\n",
       "                 United Arab Emirates    111     83\n",
       "                 United Kingdom        27510  23964\n",
       "                 US                    64943  66184"
      ]
     },
     "execution_count": 26,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "compare_dfs['dlm2202'][deaths]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th>true</th>\n",
       "      <th>pred</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Province/State</th>\n",
       "      <th>Country/Region</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"6\" valign=\"top\">NaN</th>\n",
       "      <th>Afghanistan</th>\n",
       "      <td>310</td>\n",
       "      <td>460</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Albania</th>\n",
       "      <td>488</td>\n",
       "      <td>537</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Algeria</th>\n",
       "      <td>1821</td>\n",
       "      <td>1979</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Andorra</th>\n",
       "      <td>468</td>\n",
       "      <td>489</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Argentina</th>\n",
       "      <td>1292</td>\n",
       "      <td>1425</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Armenia</th>\n",
       "      <td>977</td>\n",
       "      <td>1204</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Australian Capital Territory</th>\n",
       "      <th>Australia</th>\n",
       "      <td>103</td>\n",
       "      <td>100</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>New South Wales</th>\n",
       "      <th>Australia</th>\n",
       "      <td>2293</td>\n",
       "      <td>1730</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Queensland</th>\n",
       "      <th>Australia</th>\n",
       "      <td>965</td>\n",
       "      <td>980</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>South Australia</th>\n",
       "      <th>Australia</th>\n",
       "      <td>422</td>\n",
       "      <td>410</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Tasmania</th>\n",
       "      <th>Australia</th>\n",
       "      <td>157</td>\n",
       "      <td>84</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Victoria</th>\n",
       "      <th>Australia</th>\n",
       "      <td>1300</td>\n",
       "      <td>1334</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Western Australia</th>\n",
       "      <th>Australia</th>\n",
       "      <td>511</td>\n",
       "      <td>422</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"16\" valign=\"top\">NaN</th>\n",
       "      <th>Austria</th>\n",
       "      <td>13110</td>\n",
       "      <td>13384</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Azerbaijan</th>\n",
       "      <td>1365</td>\n",
       "      <td>1316</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Bahrain</th>\n",
       "      <td>1555</td>\n",
       "      <td>1609</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Bangladesh</th>\n",
       "      <td>174</td>\n",
       "      <td>473</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Belarus</th>\n",
       "      <td>2918</td>\n",
       "      <td>2350</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Belgium</th>\n",
       "      <td>11892</td>\n",
       "      <td>13466</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Bolivia</th>\n",
       "      <td>134</td>\n",
       "      <td>124</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Bosnia and Herzegovina</th>\n",
       "      <td>755</td>\n",
       "      <td>777</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Brazil</th>\n",
       "      <td>38039</td>\n",
       "      <td>45779</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Brunei</th>\n",
       "      <td>124</td>\n",
       "      <td>131</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Bulgaria</th>\n",
       "      <td>276</td>\n",
       "      <td>346</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Burkina Faso</th>\n",
       "      <td>517</td>\n",
       "      <td>635</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Cambodia</th>\n",
       "      <td>120</td>\n",
       "      <td>123</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Cameroon</th>\n",
       "      <td>934</td>\n",
       "      <td>1393</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Canada</th>\n",
       "      <td>22764</td>\n",
       "      <td>22019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Chile</th>\n",
       "      <td>9018</td>\n",
       "      <td>8314</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Anhui</th>\n",
       "      <th>China</th>\n",
       "      <td>985</td>\n",
       "      <td>1012</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"21\" valign=\"top\">NaN</th>\n",
       "      <th>Romania</th>\n",
       "      <td>4328</td>\n",
       "      <td>4655</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Russia</th>\n",
       "      <td>13220</td>\n",
       "      <td>15683</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Rwanda</th>\n",
       "      <td>109</td>\n",
       "      <td>111</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Saudi Arabia</th>\n",
       "      <td>3555</td>\n",
       "      <td>4906</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Senegal</th>\n",
       "      <td>356</td>\n",
       "      <td>382</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Serbia</th>\n",
       "      <td>1343</td>\n",
       "      <td>1568</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Singapore</th>\n",
       "      <td>1268</td>\n",
       "      <td>2108</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Slovakia</th>\n",
       "      <td>558</td>\n",
       "      <td>538</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Slovenia</th>\n",
       "      <td>233</td>\n",
       "      <td>320</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>South Africa</th>\n",
       "      <td>2382</td>\n",
       "      <td>2472</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Spain</th>\n",
       "      <td>112050</td>\n",
       "      <td>98260</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Sri Lanka</th>\n",
       "      <td>162</td>\n",
       "      <td>171</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Sweden</th>\n",
       "      <td>1005</td>\n",
       "      <td>880</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Switzerland</th>\n",
       "      <td>23900</td>\n",
       "      <td>24992</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Taiwan*</th>\n",
       "      <td>324</td>\n",
       "      <td>309</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Tanzania</th>\n",
       "      <td>167</td>\n",
       "      <td>36</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Thailand</th>\n",
       "      <td>2719</td>\n",
       "      <td>3353</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Tunisia</th>\n",
       "      <td>316</td>\n",
       "      <td>416</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Turkey</th>\n",
       "      <td>53808</td>\n",
       "      <td>37872</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Ukraine</th>\n",
       "      <td>1413</td>\n",
       "      <td>1231</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>United Arab Emirates</th>\n",
       "      <td>2543</td>\n",
       "      <td>3532</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Channel Islands</th>\n",
       "      <th>United Kingdom</th>\n",
       "      <td>406</td>\n",
       "      <td>382</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Gibraltar</th>\n",
       "      <th>United Kingdom</th>\n",
       "      <td>131</td>\n",
       "      <td>149</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Isle of Man</th>\n",
       "      <th>United Kingdom</th>\n",
       "      <td>271</td>\n",
       "      <td>286</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"6\" valign=\"top\">NaN</th>\n",
       "      <th>Uruguay</th>\n",
       "      <td>435</td>\n",
       "      <td>437</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>US</th>\n",
       "      <td>164015</td>\n",
       "      <td>113615</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Uzbekistan</th>\n",
       "      <td>1212</td>\n",
       "      <td>1149</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Venezuela</th>\n",
       "      <td>148</td>\n",
       "      <td>183</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Vietnam</th>\n",
       "      <td>219</td>\n",
       "      <td>259</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Kosovo</th>\n",
       "      <td>271</td>\n",
       "      <td>145</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>154 rows × 2 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                                                       true    pred\n",
       "Province/State               Country/Region                        \n",
       "NaN                          Afghanistan                310     460\n",
       "                             Albania                    488     537\n",
       "                             Algeria                   1821    1979\n",
       "                             Andorra                    468     489\n",
       "                             Argentina                 1292    1425\n",
       "                             Armenia                    977    1204\n",
       "Australian Capital Territory Australia                  103     100\n",
       "New South Wales              Australia                 2293    1730\n",
       "Queensland                   Australia                  965     980\n",
       "South Australia              Australia                  422     410\n",
       "Tasmania                     Australia                  157      84\n",
       "Victoria                     Australia                 1300    1334\n",
       "Western Australia            Australia                  511     422\n",
       "NaN                          Austria                  13110   13384\n",
       "                             Azerbaijan                1365    1316\n",
       "                             Bahrain                   1555    1609\n",
       "                             Bangladesh                 174     473\n",
       "                             Belarus                   2918    2350\n",
       "                             Belgium                  11892   13466\n",
       "                             Bolivia                    134     124\n",
       "                             Bosnia and Herzegovina     755     777\n",
       "                             Brazil                   38039   45779\n",
       "                             Brunei                     124     131\n",
       "                             Bulgaria                   276     346\n",
       "                             Burkina Faso               517     635\n",
       "                             Cambodia                   120     123\n",
       "                             Cameroon                   934    1393\n",
       "                             Canada                   22764   22019\n",
       "                             Chile                     9018    8314\n",
       "Anhui                        China                      985    1012\n",
       "...                                                     ...     ...\n",
       "NaN                          Romania                   4328    4655\n",
       "                             Russia                   13220   15683\n",
       "                             Rwanda                     109     111\n",
       "                             Saudi Arabia              3555    4906\n",
       "                             Senegal                    356     382\n",
       "                             Serbia                    1343    1568\n",
       "                             Singapore                 1268    2108\n",
       "                             Slovakia                   558     538\n",
       "                             Slovenia                   233     320\n",
       "                             South Africa              2382    2472\n",
       "                             Spain                   112050   98260\n",
       "                             Sri Lanka                  162     171\n",
       "                             Sweden                    1005     880\n",
       "                             Switzerland              23900   24992\n",
       "                             Taiwan*                    324     309\n",
       "                             Tanzania                   167      36\n",
       "                             Thailand                  2719    3353\n",
       "                             Tunisia                    316     416\n",
       "                             Turkey                   53808   37872\n",
       "                             Ukraine                   1413    1231\n",
       "                             United Arab Emirates      2543    3532\n",
       "Channel Islands              United Kingdom             406     382\n",
       "Gibraltar                    United Kingdom             131     149\n",
       "Isle of Man                  United Kingdom             271     286\n",
       "NaN                          Uruguay                    435     437\n",
       "                             US                      164015  113615\n",
       "                             Uzbekistan                1212    1149\n",
       "                             Venezuela                  148     183\n",
       "                             Vietnam                    219     259\n",
       "                             Kosovo                     271     145\n",
       "\n",
       "[154 rows x 2 columns]"
      ]
     },
     "execution_count": 27,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "compare_dfs['dlm2202'][recovered]"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.6"
  },
  "toc": {
   "base_numbering": 1,
   "nav_menu": {},
   "number_sections": true,
   "sideBar": true,
   "skip_h1_title": false,
   "title_cell": "Table of Contents",
   "title_sidebar": "Contents",
   "toc_cell": false,
   "toc_position": {},
   "toc_section_display": true,
   "toc_window_display": true
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
